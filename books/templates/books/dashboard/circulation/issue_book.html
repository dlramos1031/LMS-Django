{% extends "dashboard/base.html" %}
{% load static %}
{% load bootstrap5 %}

{% block dashboard_page_title %}Issue Book Manually{% endblock %}

{% block dashboard_page_title_main %}Issue Book Manually{% endblock %}

{% block dashboard_page_actions %}
    <a href="{% url 'books:dashboard_active_loans' %}" class="btn btn-outline-secondary">
        <i class="bi bi-journals"></i> View Active Loans
    </a>
{% endblock %}

{% block dashboard_content_main %}
<div class="row justify-content-center">
    <div class="col-lg-8 col-xl-7">
        <div class="card shadow-sm">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-book-half me-2"></i>Issue Book to Borrower</h5>
            </div>
            <div class="card-body">
                <p class="text-muted">Select a borrower and an available book copy to issue a loan directly.</p>
                <form method="post" novalidate>
                    {% csrf_token %}
                    
                    {% bootstrap_form form layout='horizontal' %}

                    <div class="mt-4 text-end">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle-fill"></i> Issue Book
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock dashboard_content_main %}

{% block javascript %}
{{ block.super }}
{# If you implement Select2 or other JS for the form fields, initialize it here #}
{# Example for Select2 (requires Select2 JS/CSS to be included in your base template or page)
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
$(document).ready(function() {
    $('.select2-searchable select').select2({
        theme: "bootstrap-5",
        width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
        placeholder: $(this).data('placeholder'),
    });
});
</script>
#}
{% endblock javascript %}